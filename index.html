<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para mi Gigi ‚ù§Ô∏è</title>

<style>
*{box-sizing:border-box}

body{
    margin:0;
    min-height:100vh;
    overflow:hidden;
    font-family:'Segoe UI',Arial,sans-serif;
    background:radial-gradient(circle at center,#200010,#000 70%);
    color:white;
    cursor:crosshair;
}

.bg-glow{
    position:fixed;
    inset:0;
    background:radial-gradient(circle at center,rgba(255,40,120,.15),transparent 65%);
    z-index:0;
}

canvas{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    z-index:1;
}

/* INTRO */
#intro{
    position:fixed;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
    z-index:50;
    background:linear-gradient(135deg,#fff1f6,#ffe8cc,#fff1e6);
}

.intro-card{
    background:rgba(255,255,255,.95);
    border-radius:22px;
    padding:clamp(25px,5vw,40px);
    text-align:center;
    width:100%;
    max-width:420px;
    box-shadow:0 25px 60px rgba(0,0,0,.2);
}

#typeText{
    font-size:clamp(1rem,4vw,1.2rem);
    color:#7a3b50;
    line-height:1.6;
    min-height:110px;
    margin-bottom:20px;
}

.envelope{
    width:clamp(180px,60vw,240px);
    height:clamp(120px,40vw,150px);
    margin:0 auto 25px;
    background:linear-gradient(#fff,#ffe4ec);
    border-radius:14px;
    position:relative;
}

.seal{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:44px;
    height:44px;
    background:#ff7aa2;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:18px;
    color:white;
    animation:pulse 1.8s infinite;
}

#secret{
    padding:12px;
    border-radius:20px;
    border:1px solid #ccc;
    width:100%;
    margin-bottom:8px;
    text-align:center;
    font-size:1rem;
}

.hint{
    font-size:.85rem;
    color:#9c5b70;
    margin-bottom:15px;
}

#btn{
    padding:14px 36px;
    border:none;
    border-radius:30px;
    background:linear-gradient(135deg,#ff9fbf,#ff7aa2);
    color:white;
    font-size:1rem;
    cursor:pointer;
    width:100%;
}

#error{
    color:#ff4d6d;
    display:none;
    margin-top:10px;
    font-size:.95rem;
}

.waiting{
    font-size:.85rem;
    color:#a87486;
    margin-top:12px;
    opacity:0;
    transition:opacity 1s;
}

@keyframes pulse{
    50%{transform:translate(-50%,-50%) scale(1.15)}
}

/* FINAL */
.interface{
    position:absolute;
    bottom:clamp(5%,8vh,10%);
    width:100%;
    text-align:center;
    z-index:10;
    opacity:0;
    transition:opacity 2s;
    padding:0 15px;
}

h1{
    font-size:clamp(1.8rem,6vw,3rem);
    color:#ff2b7a;
    text-shadow:0 0 20px #ff0055;
}

.dedication{
    font-size:clamp(1rem,4vw,1.3rem);
    margin-top:12px;
}

/* EMOJIS */
.float{
    position:absolute;
    font-size:clamp(20px,5vw,26px);
    animation:floatUp 3s ease-out forwards;
    pointer-events:none;
    z-index:15;
}

@keyframes floatUp{
    to{opacity:0;transform:translateY(-220px)}
}

/* MENSAJES */
.center-message{
    position:fixed;
    top:35%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:clamp(1.1rem,4.5vw,1.7rem);
    text-align:center;
    color:#ffd1dc;
    text-shadow:0 0 15px #ff0055;
    opacity:0;
    animation:fadeMsg 4s forwards;
    z-index:20;
    pointer-events:none;
    padding:0 20px;
}

@keyframes fadeMsg{
    20%,80%{opacity:1}
}
</style>
</head>

<body onclick="spawnLove(event)">

<div class="bg-glow"></div>
<canvas id="scene"></canvas>

<!-- INTRO -->
<div id="intro">
  <div class="intro-card">
    <div id="typeText"></div>

    <div class="envelope">
        <div class="seal">‚ù§Ô∏è</div>
    </div>

    <input id="secret" type="password" placeholder="Solo t√∫ sabes la clave üíå">
    <div class="hint">Pista: no es una palabra, es un recuerdo</div>

    <button id="btn" onclick="checkAccess(); playMusic()">Abrir carta</button>
    <p id="error">Esa no es la clave üíî</p>
    <div class="waiting" id="waitMsg">No hay prisa‚Ä¶ t√≥mate tu tiempo ü§ç</div>
  </div>
</div>

<!-- FINAL -->
<div class="interface" id="finalText">
    <h1>¬°Feliz Cumplea√±os, Mi Gigi!</h1>
    <div class="dedication">Te quiero con todo mi coraz√≥n ‚ù§Ô∏è</div>
    <div class="dedication">Eres lo m√°s importante para m√≠</div>
</div>

<!-- üéµ AUDIO CORREGIDO PARA GITHUB -->
<audio id="music" loop preload="auto">
    <source src="Una%20Lady%20Como%20T%C3%BA%20-%20MTZ%20Manuel%20Turizo%20%20Video%20Oficial.mp3" type="audio/mpeg">
</audio>

<script>
const text="Gigi,\nesto es para ti.\n\nHay sentimientos que no se fuerzan,\nsimplemente aparecen ‚ú®";
let i=0;
const speed=40;
const el=document.getElementById("typeText");

function typeWriter(){
    if(i<text.length){
        el.innerHTML+=text[i]==="\n"?"<br>":text[i];
        i++;
        setTimeout(typeWriter,speed);
    }
}
typeWriter();

setTimeout(()=>{
    document.getElementById("waitMsg").style.opacity=1;
},6000);

const UNIQUE_KEY="UNO";

const emojis=["‚ù§Ô∏è","üíñ","üåπ","‚ú®","üå∏"];
const heartMessages=[
 "Gigi, me importa mucho lo que sientes ü§ç",
 "Me gusta cuidarte, incluso en los peque√±os detalles",
 "Estar contigo se siente bonito"
];

let heartArea=null;

function playMusic(){
    const audio=document.getElementById("music");
    audio.volume=0.7;
    audio.play().catch(()=>{});
}

function checkAccess(){
    const val=document.getElementById("secret").value.trim();
    const error=document.getElementById("error");
    if(val===UNIQUE_KEY){
        document.getElementById("intro").remove();
        document.getElementById("finalText").style.opacity=1;
        initFlowerHeart();
    }else{
        error.style.display="block";
    }
}

function spawnLove(e){
    spawnEmoji(e);
    if(heartArea && isOnHeart(e.clientX,e.clientY)){
        showHeartMessage();
    }
}

function spawnEmoji(e){
    const el=document.createElement("div");
    el.className="float";
    el.textContent=emojis[Math.floor(Math.random()*emojis.length)];
    el.style.left=e.clientX+"px";
    el.style.top=e.clientY+"px";
    document.body.appendChild(el);
    setTimeout(()=>el.remove(),3000);
}

function showHeartMessage(){
    const m=document.createElement("div");
    m.className="center-message";
    m.textContent=heartMessages[Math.floor(Math.random()*heartMessages.length)];
    document.body.appendChild(m);
    setTimeout(()=>m.remove(),4000);
}

function initFlowerHeart(){
    const canvas=document.getElementById("scene");
    const ctx=canvas.getContext("2d");

    function resize(){
        canvas.width=innerWidth;
        canvas.height=innerHeight;
    }
    resize();
    window.addEventListener("resize",resize);

    function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        const cx=canvas.width/2;
        const cy=canvas.height/2-60;
        heartArea={x:cx,y:cy,w:180,h:160};

        ctx.strokeStyle="#1f8f4a";
        ctx.lineWidth=10;
        ctx.beginPath();
        ctx.moveTo(cx,cy+140);
        ctx.lineTo(cx,canvas.height);
        ctx.stroke();

        ctx.fillStyle="#ff0055";
        ctx.beginPath();
        for(let t=0;t<Math.PI*2;t+=0.01){
            const x=cx+180*Math.sin(t)**3;
            const y=cy-(140*Math.cos(t)-55*Math.cos(2*t)-20*Math.cos(3*t));
            ctx.lineTo(x,y);
        }
        ctx.closePath();
        ctx.fill();

        requestAnimationFrame(draw);
    }
    draw();
}

function isOnHeart(x,y){
    return (
        x > heartArea.x-heartArea.w/2 &&
        x < heartArea.x+heartArea.w/2 &&
        y > heartArea.y-heartArea.h/2 &&
        y < heartArea.y+heartArea.h/2
    );
}
</script>

</body>
</html>
